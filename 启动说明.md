# 老人监护管理系统 - 启动说明

## 系统概述

老人监护管理系统是一个专为老年人设计的综合性健康监护平台，通过Web应用实现对老人健康状况的实时监控、预警管理和数据分析。

## 环境要求

- **Python 3.6+** ✅ (当前系统: Python 3.8.6)
- **现代浏览器** (Chrome, Firefox, Safari, Edge)
- **无需Node.js** (使用Python后端)
- **无需Maven** (不使用Java后端)

## 快速启动

### 方法一：使用启动脚本（推荐）

1. 双击运行 `start.bat` 文件
2. 等待服务器启动完成
3. 在浏览器中打开: http://localhost:3000

### 方法二：手动启动

1. 打开命令提示符（CMD）
2. 进入项目目录：
   ```cmd
   cd elderly-assistant-web
   ```
3. 启动服务器：
   ```cmd
   python server.py
   ```
4. 在浏览器中打开: http://localhost:3000

## 系统功能

### 🎯 核心功能

1. **仪表盘** - 系统总览和统计数据
2. **用户管理** - 查看和管理注册用户
3. **实时监控** - 监控用户状态和活动
4. **通知中心** - 查看系统通知和预警

### 📊 数据展示

- **统计卡片**: 注册用户数、今日活跃用户、待处理事件
- **图表展示**: 用户活跃度趋势、异常事件分布
- **实时更新**: 每5秒自动更新数据

### 🔧 管理功能

- **用户查看**: 查看用户详情和状态
- **用户添加**: 添加新的注册用户
- **家属管理**: 为用户添加家属联系人
- **通知筛选**: 按类型筛选系统通知

## 技术架构

### 后端技术栈
- **Python 3.8.6** - 后端服务语言
- **SQLite** - 轻量级数据库
- **HTTP Server** - 内置Python HTTP服务器
- **RESTful API** - 标准API接口

### 前端技术栈
- **HTML5** - 现代Web标准
- **CSS3** - 响应式设计
- **JavaScript ES6+** - 现代JavaScript
- **Font Awesome** - 图标库
- **原生DOM API** - 无框架依赖

## API接口

### 获取统计数据
```
GET /api/stats
```
返回系统统计信息（用户总数、活跃用户、未解决事件）

### 获取用户列表
```
GET /api/users
```
返回所有注册用户的详细信息

### 获取用户详情
```
GET /api/users/{id}
```
返回指定用户的完整信息（包含家属、使用日志、异常事件）

### 创建新用户
```
POST /api/users
Content-Type: application/json

{
  "name": "用户姓名",
  "phone": "手机号码",
  "email": "邮箱地址",
  "deviceId": "设备ID"
}
```

## 数据库结构

### 用户表 (users)
- id: 用户唯一标识
- name: 用户姓名
- phone: 手机号码
- email: 邮箱地址
- device_id: 关联设备ID
- created_at: 注册时间
- last_active: 最后活跃时间

### 家属表 (family_members)
- id: 家属唯一标识
- user_id: 关联用户ID
- name: 家属姓名
- phone: 联系电话
- relationship: 关系类型
- is_primary: 是否为主要联系人
- created_at: 创建时间

### 使用日志表 (usage_logs)
- id: 日志ID
- user_id: 用户ID
- app_name: 应用名称
- action_type: 操作类型
- screen_name: 界面名称
- timestamp: 操作时间
- is_error: 是否为错误

### 异常事件表 (abnormal_events)
- id: 事件ID
- user_id: 用户ID
- event_type: 事件类型
- description: 事件描述
- severity: 严重程度
- timestamp: 发生时间
- resolved: 是否已解决

### 通知表 (notifications)
- id: 通知ID
- user_id: 用户ID
- family_member_id: 家属ID
- title: 通知标题
- message: 通知内容
- type: 通知类型
- read: 是否已读
- timestamp: 创建时间

## 故障排除

### 端口占用问题
如果遇到端口3000被占用的错误：
1. 关闭其他使用3000端口的程序
2. 或者修改server.py中的端口号

### 访问问题
如果无法访问 http://localhost:3000：
1. 确认Python服务器正在运行
2. 检查防火墙设置
3. 尝试使用 http://127.0.0.1:3000

### 数据库问题
如果遇到数据库错误：
1. 删除 `elderly_assistant.db` 文件
2. 重新启动服务器（会自动创建新数据库）

## 开发说明

### 添加新功能
1. 修改 `server.py` 添加新的API端点
2. 更新 `public/app.js` 添加前端逻辑
3. 修改 `public/index.html` 添加UI元素
4. 更新 `public/styles.css` 添加样式

### 自定义配置
- **端口设置**: 修改 `server.py` 中的 `port` 变量
- **数据库路径**: 修改 `DatabaseManager` 中的 `db_path`
- **静态文件**: 所有文件位于 `public/` 目录

## 联系支持

如遇到问题或需要技术支持，请：
1. 检查本故障排除指南
2. 查看Python服务器输出的错误信息
3. 确认浏览器控制台无JavaScript错误

---

**版本**: v1.0.0  
**更新时间**: 2025-12-16  
**兼容性**: Windows 10/11, macOS, Linux